<!DOCTYPE html>
<html>
  <head>
    <title>Document</title>
  </head>
  <body>
    <script>
      function converCurrencyFormat(amount, format) {
        let currencyUnit = "";

        if (format.substring(0, 1) != "#") {
          currencyUnit = format.substring(0, 1);

          let groupingSeparator = "";
          let maxFractionDigits = 0;
          let decimalSeparator = "";

          if (format.indexOf(".") == -1) {
            groupingSeparator = ",";
          } else if (format.indexOf(",") == -1) {
            groupingSeparator = ".";
          } else if (format.indexOf(",") < format.indexOf(".")) {
            groupingSeparator = ",";
            decimalSeparator = ".";
            maxFractionDigits = format.length - format.indexOf(".") - 1;
          } else {
            groupingSeparator = ".";
            decimalSeparator = ",";
            maxFractionDigits = format.length - format.indexOf(",") - 1;
          }

          let sign = "";
          let dec = 1;

          for (let i = 0; i < maxFractionDigits; i++) {
            dec = dec * 10;
          }

          let v = String(Math.round(parseFloat(amount) * dec) / dec);

          if (v.startsWith("-")) {
            sign = "-";
            v = v.substring(1);
          }

          if (
            maxFractionDigits > 0 &&
            format.substring(format.length - 1) == "0"
          ) {
            v = String(parseFloat(v).toFixed(maxFractionDigits));
          }

          let d = "";

          if (maxFractionDigits > 0 && v.indexOf(".") > -1) {
            d = v.substring(v.indexOf("."));

            d = d.replace(".", decimalSeparator);

            v = v.substring(0, v.indexOf("."));
          }

          let r = /(\d+)(\d{3})/;

          while (r.test(v)) {
            v = v.replace(r, "$1" + groupingSeparator + "$2");
          }

          return sign + currencyUnit + String(v) + String(d);
        }
      }
    </script>
  </body>
</html>
